---
source: compiler/src/compile/ir/optimisations.rs
expression: output
input_file: compiler/src/compile/ir/snapshot_tests/optimisations/integration/boolean_short_circuit.tapir
---
----------- before -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
temp.17 = temp.15 > temp.16
a.18 = temp.17
temp.19 = a.18
temp.20 = bool false
conditional_jump temp.19 0 1

---- block 0 ----
getprop temp.21, 0
temp.22 = int 100
temp.23 = temp.21 < temp.22
jmp 1

---- block 1 ----
temp.24 = φ(temp.20 from 2, temp.23 from 0)
a.27 = φ(a.18 from 2, a.18 from 0)
conditional_jump temp.24 3 4

---- block 3 ----
temp.25 = int 1
storeprop temp.25, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
a.26 = φ(a.27 from 3, a.27 from 4)
temp.28 = a.26
temp.29 = bool true
conditional_jump temp.28 7 6

---- block 7 ----
temp.33 = φ(temp.29 from 5, temp.32 from 6)
conditional_jump temp.33 8 9

---- block 6 ----
getprop temp.30, 0
temp.31 = int 100
temp.32 = temp.30 < temp.31
jmp 7

---- block 8 ----
temp.34 = int 2
storeprop temp.34, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- empty_phi -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
temp.17 = temp.15 > temp.16
a.18 = temp.17
temp.19 = a.18
temp.20 = bool false
conditional_jump temp.19 0 1

---- block 0 ----
getprop temp.21, 0
temp.22 = int 100
temp.23 = temp.21 < temp.22
jmp 1

---- block 1 ----
temp.24 = φ(temp.20 from 2, temp.23 from 0)
conditional_jump temp.24 3 4

---- block 3 ----
temp.25 = int 1
storeprop temp.25, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
temp.28 = a.18
temp.29 = bool true
conditional_jump temp.28 7 6

---- block 7 ----
temp.33 = φ(temp.29 from 5, temp.32 from 6)
conditional_jump temp.33 8 9

---- block 6 ----
getprop temp.30, 0
temp.31 = int 100
temp.32 = temp.30 < temp.31
jmp 7

---- block 8 ----
temp.34 = int 2
storeprop temp.34, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- copy_propagation -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
temp.17 = temp.15 > temp.16
a.18 = temp.17
temp.19 = temp.17
temp.20 = bool false
conditional_jump temp.17 0 1

---- block 0 ----
getprop temp.21, 0
temp.22 = int 100
temp.23 = temp.21 < temp.22
jmp 1

---- block 1 ----
temp.24 = φ(temp.20 from 2, temp.23 from 0)
conditional_jump temp.24 3 4

---- block 3 ----
temp.25 = int 1
storeprop temp.25, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
temp.28 = temp.17
temp.29 = bool true
conditional_jump temp.17 7 6

---- block 7 ----
temp.33 = φ(temp.29 from 5, temp.32 from 6)
conditional_jump temp.33 8 9

---- block 6 ----
getprop temp.30, 0
temp.31 = int 100
temp.32 = temp.30 < temp.31
jmp 7

---- block 8 ----
temp.34 = int 2
storeprop temp.34, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
temp.17 = temp.15 > temp.16
temp.20 = bool false
conditional_jump temp.17 0 1

---- block 0 ----
getprop temp.21, 0
temp.22 = int 100
temp.23 = temp.21 < temp.22
jmp 1

---- block 1 ----
temp.24 = φ(temp.20 from 2, temp.23 from 0)
conditional_jump temp.24 3 4

---- block 3 ----
temp.25 = int 1
storeprop temp.25, 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
temp.29 = bool true
conditional_jump temp.17 7 6

---- block 7 ----
temp.33 = φ(temp.29 from 5, temp.32 from 6)
conditional_jump temp.33 8 9

---- block 6 ----
getprop temp.30, 0
temp.31 = int 100
temp.32 = temp.30 < temp.31
jmp 7

---- block 8 ----
temp.34 = int 2
storeprop temp.34, 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- immediate_stores -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
temp.17 = temp.15 > temp.16
temp.20 = bool false
conditional_jump temp.17 0 1

---- block 0 ----
getprop temp.21, 0
temp.22 = int 100
temp.23 = temp.21 < temp.22
jmp 1

---- block 1 ----
temp.24 = φ(temp.20 from 2, temp.23 from 0)
conditional_jump temp.24 3 4

---- block 3 ----
temp.25 = int 1
storeprop imm(1), 0
jmp 5

---- block 4 ----
jmp 5

---- block 5 ----
temp.29 = bool true
conditional_jump temp.17 7 6

---- block 7 ----
temp.33 = φ(temp.29 from 5, temp.32 from 6)
conditional_jump temp.33 8 9

---- block 6 ----
getprop temp.30, 0
temp.31 = int 100
temp.32 = temp.30 < temp.31
jmp 7

---- block 8 ----
temp.34 = int 2
storeprop imm(2), 0
jmp 10

---- block 9 ----
jmp 10

---- block 10 ----
return 


----------- empty_block -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
temp.17 = temp.15 > temp.16
temp.20 = bool false
conditional_jump temp.17 0 1

---- block 0 ----
getprop temp.21, 0
temp.22 = int 100
temp.23 = temp.21 < temp.22
jmp 1

---- block 1 ----
temp.24 = φ(temp.20 from 2, temp.23 from 0)
conditional_jump temp.24 3 5

---- block 3 ----
temp.25 = int 1
storeprop imm(1), 0
jmp 5

---- block 5 ----
temp.29 = bool true
conditional_jump temp.17 7 6

---- block 7 ----
temp.33 = φ(temp.29 from 5, temp.32 from 6)
conditional_jump temp.33 8 10

---- block 6 ----
getprop temp.30, 0
temp.31 = int 100
temp.32 = temp.30 < temp.31
jmp 7

---- block 8 ----
temp.34 = int 2
storeprop imm(2), 0
return 

---- block 10 ----
return 


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 2 ----
getprop temp.15, 0
temp.16 = int 0
temp.17 = temp.15 > temp.16
temp.20 = bool false
conditional_jump temp.17 0 1

---- block 0 ----
getprop temp.21, 0
temp.22 = int 100
temp.23 = temp.21 < temp.22
jmp 1

---- block 1 ----
temp.24 = φ(temp.20 from 2, temp.23 from 0)
conditional_jump temp.24 3 5

---- block 3 ----
storeprop imm(1), 0
jmp 5

---- block 5 ----
temp.29 = bool true
conditional_jump temp.17 7 6

---- block 7 ----
temp.33 = φ(temp.29 from 5, temp.32 from 6)
conditional_jump temp.33 8 10

---- block 6 ----
getprop temp.30, 0
temp.31 = int 100
temp.32 = temp.30 < temp.31
jmp 7

---- block 8 ----
storeprop imm(2), 0
return 

---- block 10 ----
return
