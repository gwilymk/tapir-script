---
source: compiler/src/compile/ir/optimisations.rs
expression: output
input_file: compiler/src/compile/ir/snapshot_tests/optimisations/dead_global_elimination/nested_struct_global.tapir
---
----------- before -------------
=======================
fn @toplevel() -> 

---- block 0 ----
temp.59 = int 1
temp.60 = int 2
temp.8.x.61 = temp.59
temp.8.y.62 = temp.60
temp.63 = temp.8.x.61
temp.7.x.64 = temp.63
temp.65 = temp.8.y.62
temp.7.y.66 = temp.65
temp.67 = int 3
temp.68 = int 4
temp.18.x.69 = temp.67
temp.18.y.70 = temp.68
temp.71 = temp.18.x.69
temp.17.x.72 = temp.71
temp.73 = temp.18.y.70
temp.17.y.74 = temp.73
temp.0.origin.x.75 = temp.7.x.64
temp.0.origin.y.76 = temp.7.y.66
temp.0.size.x.77 = temp.17.x.72
temp.0.size.y.78 = temp.17.y.74
temp.79 = temp.0.origin.x.75
setglobal 1, temp.79
temp.80 = temp.0.origin.y.76
setglobal 2, temp.80
temp.81 = temp.0.size.x.77
setglobal 3, temp.81
temp.82 = temp.0.size.y.78
setglobal 4, temp.82
getglobal temp.83, 1
temp.33.x.84 = temp.83
getglobal temp.85, 2
temp.33.y.86 = temp.85
temp.87 = temp.33.x.84
temp.88 = extern test(temp.87)
getglobal temp.89, 1
temp.40.x.90 = temp.89
getglobal temp.91, 2
temp.40.y.92 = temp.91
temp.93 = temp.40.y.92
temp.94 = extern test(temp.93)
getglobal temp.95, 3
temp.47.x.96 = temp.95
getglobal temp.97, 4
temp.47.y.98 = temp.97
temp.99 = temp.47.x.96
temp.100 = extern test(temp.99)
getglobal temp.101, 3
temp.54.x.102 = temp.101
getglobal temp.103, 4
temp.54.y.104 = temp.103
temp.105 = temp.54.y.104
temp.106 = extern test(temp.105)
return 


----------- eliminate_dead_globals -------------
=======================
fn @toplevel() -> 

---- block 0 ----
temp.59 = int 1
temp.60 = int 2
temp.8.x.61 = temp.59
temp.8.y.62 = temp.60
temp.63 = temp.8.x.61
temp.7.x.64 = temp.63
temp.65 = temp.8.y.62
temp.7.y.66 = temp.65
temp.67 = int 3
temp.68 = int 4
temp.18.x.69 = temp.67
temp.18.y.70 = temp.68
temp.71 = temp.18.x.69
temp.17.x.72 = temp.71
temp.73 = temp.18.y.70
temp.17.y.74 = temp.73
temp.0.origin.x.75 = temp.7.x.64
temp.0.origin.y.76 = temp.7.y.66
temp.0.size.x.77 = temp.17.x.72
temp.0.size.y.78 = temp.17.y.74
temp.79 = temp.0.origin.x.75
setglobal 0, temp.79
temp.80 = temp.0.origin.y.76
setglobal 1, temp.80
temp.81 = temp.0.size.x.77
setglobal 2, temp.81
temp.82 = temp.0.size.y.78
setglobal 3, temp.82
getglobal temp.83, 0
temp.33.x.84 = temp.83
getglobal temp.85, 1
temp.33.y.86 = temp.85
temp.87 = temp.33.x.84
temp.88 = extern test(temp.87)
getglobal temp.89, 0
temp.40.x.90 = temp.89
getglobal temp.91, 1
temp.40.y.92 = temp.91
temp.93 = temp.40.y.92
temp.94 = extern test(temp.93)
getglobal temp.95, 2
temp.47.x.96 = temp.95
getglobal temp.97, 3
temp.47.y.98 = temp.97
temp.99 = temp.47.x.96
temp.100 = extern test(temp.99)
getglobal temp.101, 2
temp.54.x.102 = temp.101
getglobal temp.103, 3
temp.54.y.104 = temp.103
temp.105 = temp.54.y.104
temp.106 = extern test(temp.105)
return 


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 0 ----
temp.59 = int 1
temp.60 = int 2
temp.8.x.61 = temp.59
temp.8.y.62 = temp.60
temp.63 = temp.8.x.61
temp.7.x.64 = temp.63
temp.65 = temp.8.y.62
temp.7.y.66 = temp.65
temp.67 = int 3
temp.68 = int 4
temp.18.x.69 = temp.67
temp.18.y.70 = temp.68
temp.71 = temp.18.x.69
temp.17.x.72 = temp.71
temp.73 = temp.18.y.70
temp.17.y.74 = temp.73
temp.0.origin.x.75 = temp.7.x.64
temp.0.origin.y.76 = temp.7.y.66
temp.0.size.x.77 = temp.17.x.72
temp.0.size.y.78 = temp.17.y.74
temp.79 = temp.0.origin.x.75
setglobal 0, temp.79
temp.80 = temp.0.origin.y.76
setglobal 1, temp.80
temp.81 = temp.0.size.x.77
setglobal 2, temp.81
temp.82 = temp.0.size.y.78
setglobal 3, temp.82
getglobal temp.83, 0
temp.33.x.84 = temp.83
getglobal temp.85, 1
temp.87 = temp.33.x.84
temp.88 = extern test(temp.87)
getglobal temp.89, 0
getglobal temp.91, 1
temp.40.y.92 = temp.91
temp.93 = temp.40.y.92
temp.94 = extern test(temp.93)
getglobal temp.95, 2
temp.47.x.96 = temp.95
getglobal temp.97, 3
temp.99 = temp.47.x.96
temp.100 = extern test(temp.99)
getglobal temp.101, 2
getglobal temp.103, 3
temp.54.y.104 = temp.103
temp.105 = temp.54.y.104
temp.106 = extern test(temp.105)
return 


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 0 ----
temp.59 = int 1
temp.60 = int 2
temp.8.x.61 = temp.59
temp.8.y.62 = temp.60
temp.63 = temp.8.x.61
temp.7.x.64 = temp.63
temp.65 = temp.8.y.62
temp.7.y.66 = temp.65
temp.67 = int 3
temp.68 = int 4
temp.18.x.69 = temp.67
temp.18.y.70 = temp.68
temp.71 = temp.18.x.69
temp.17.x.72 = temp.71
temp.73 = temp.18.y.70
temp.17.y.74 = temp.73
temp.0.origin.x.75 = temp.7.x.64
temp.0.origin.y.76 = temp.7.y.66
temp.0.size.x.77 = temp.17.x.72
temp.0.size.y.78 = temp.17.y.74
temp.79 = temp.0.origin.x.75
setglobal 0, temp.79
temp.80 = temp.0.origin.y.76
setglobal 1, temp.80
temp.81 = temp.0.size.x.77
setglobal 2, temp.81
temp.82 = temp.0.size.y.78
setglobal 3, temp.82
getglobal temp.83, 0
temp.33.x.84 = temp.83
temp.87 = temp.33.x.84
temp.88 = extern test(temp.87)
getglobal temp.91, 1
temp.40.y.92 = temp.91
temp.93 = temp.40.y.92
temp.94 = extern test(temp.93)
getglobal temp.95, 2
temp.47.x.96 = temp.95
temp.99 = temp.47.x.96
temp.100 = extern test(temp.99)
getglobal temp.103, 3
temp.54.y.104 = temp.103
temp.105 = temp.54.y.104
temp.106 = extern test(temp.105)
return
