---
source: compiler/src/compile/ir/optimisations.rs
expression: output
input_file: compiler/src/compile/ir/snapshot_tests/optimisations/dead_global_elimination/nested_struct_global.tapir
---
----------- before -------------
=======================
fn @toplevel() -> 

---- block 0 ----
temp.43 = int 1
temp.44 = int 2
temp.8.x.45 = temp.43
temp.8.y.46 = temp.44
temp.7.x.47 = temp.8.x.45
temp.7.y.48 = temp.8.y.46
temp.49 = int 3
temp.50 = int 4
temp.16.x.51 = temp.49
temp.16.y.52 = temp.50
temp.15.x.53 = temp.16.x.51
temp.15.y.54 = temp.16.y.52
temp.0.origin.x.55 = temp.7.x.47
temp.0.origin.y.56 = temp.7.y.48
temp.0.size.x.57 = temp.15.x.53
temp.0.size.y.58 = temp.15.y.54
setglobal 1, temp.0.origin.x.55
setglobal 2, temp.0.origin.y.56
setglobal 3, temp.0.size.x.57
setglobal 4, temp.0.size.y.58
getglobal temp.25.x.59, 1
getglobal temp.25.y.60, 2
temp.61 = temp.25.x.59
temp.62 = extern test(temp.61)
getglobal temp.30.x.63, 1
getglobal temp.30.y.64, 2
temp.65 = temp.30.y.64
temp.66 = extern test(temp.65)
getglobal temp.35.x.67, 3
getglobal temp.35.y.68, 4
temp.69 = temp.35.x.67
temp.70 = extern test(temp.69)
getglobal temp.40.x.71, 3
getglobal temp.40.y.72, 4
temp.73 = temp.40.y.72
temp.74 = extern test(temp.73)
return 


----------- eliminate_dead_globals -------------
=======================
fn @toplevel() -> 

---- block 0 ----
temp.43 = int 1
temp.44 = int 2
temp.8.x.45 = temp.43
temp.8.y.46 = temp.44
temp.7.x.47 = temp.8.x.45
temp.7.y.48 = temp.8.y.46
temp.49 = int 3
temp.50 = int 4
temp.16.x.51 = temp.49
temp.16.y.52 = temp.50
temp.15.x.53 = temp.16.x.51
temp.15.y.54 = temp.16.y.52
temp.0.origin.x.55 = temp.7.x.47
temp.0.origin.y.56 = temp.7.y.48
temp.0.size.x.57 = temp.15.x.53
temp.0.size.y.58 = temp.15.y.54
setglobal 0, temp.0.origin.x.55
setglobal 1, temp.0.origin.y.56
setglobal 2, temp.0.size.x.57
setglobal 3, temp.0.size.y.58
getglobal temp.25.x.59, 0
getglobal temp.25.y.60, 1
temp.61 = temp.25.x.59
temp.62 = extern test(temp.61)
getglobal temp.30.x.63, 0
getglobal temp.30.y.64, 1
temp.65 = temp.30.y.64
temp.66 = extern test(temp.65)
getglobal temp.35.x.67, 2
getglobal temp.35.y.68, 3
temp.69 = temp.35.x.67
temp.70 = extern test(temp.69)
getglobal temp.40.x.71, 2
getglobal temp.40.y.72, 3
temp.73 = temp.40.y.72
temp.74 = extern test(temp.73)
return 


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 0 ----
temp.43 = int 1
temp.44 = int 2
temp.8.x.45 = temp.43
temp.8.y.46 = temp.44
temp.7.x.47 = temp.8.x.45
temp.7.y.48 = temp.8.y.46
temp.49 = int 3
temp.50 = int 4
temp.16.x.51 = temp.49
temp.16.y.52 = temp.50
temp.15.x.53 = temp.16.x.51
temp.15.y.54 = temp.16.y.52
temp.0.origin.x.55 = temp.7.x.47
temp.0.origin.y.56 = temp.7.y.48
temp.0.size.x.57 = temp.15.x.53
temp.0.size.y.58 = temp.15.y.54
setglobal 0, temp.0.origin.x.55
setglobal 1, temp.0.origin.y.56
setglobal 2, temp.0.size.x.57
setglobal 3, temp.0.size.y.58
getglobal temp.25.x.59, 0
temp.61 = temp.25.x.59
temp.62 = extern test(temp.61)
getglobal temp.30.y.64, 1
temp.65 = temp.30.y.64
temp.66 = extern test(temp.65)
getglobal temp.35.x.67, 2
temp.69 = temp.35.x.67
temp.70 = extern test(temp.69)
getglobal temp.40.y.72, 3
temp.73 = temp.40.y.72
temp.74 = extern test(temp.73)
return
