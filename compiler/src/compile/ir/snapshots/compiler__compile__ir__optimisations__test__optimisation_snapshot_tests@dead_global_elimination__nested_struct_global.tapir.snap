---
source: compiler/src/compile/ir/optimisations.rs
expression: output
input_file: compiler/src/compile/ir/snapshot_tests/optimisations/dead_global_elimination/nested_struct_global.tapir
---
----------- before -------------
=======================
fn @toplevel() -> 

---- block 0 ----
temp.51 = int 1
temp.52 = int 2
temp.8.x.53 = temp.51
temp.8.y.54 = temp.52
temp.55 = temp.8.x.53
temp.7.x.56 = temp.55
temp.57 = temp.8.y.54
temp.7.y.58 = temp.57
temp.59 = int 3
temp.60 = int 4
temp.18.x.61 = temp.59
temp.18.y.62 = temp.60
temp.63 = temp.18.x.61
temp.17.x.64 = temp.63
temp.65 = temp.18.y.62
temp.17.y.66 = temp.65
temp.0.origin.x.67 = temp.7.x.56
temp.0.origin.y.68 = temp.7.y.58
temp.0.size.x.69 = temp.17.x.64
temp.0.size.y.70 = temp.17.y.66
temp.71 = temp.0.origin.x.67
setglobal 1, temp.71
temp.72 = temp.0.origin.y.68
setglobal 2, temp.72
temp.73 = temp.0.size.x.69
setglobal 3, temp.73
temp.74 = temp.0.size.y.70
setglobal 4, temp.74
getglobal temp.33.x.75, 1
getglobal temp.33.y.76, 2
temp.77 = temp.33.x.75
temp.78 = extern test(temp.77)
getglobal temp.38.x.79, 1
getglobal temp.38.y.80, 2
temp.81 = temp.38.y.80
temp.82 = extern test(temp.81)
getglobal temp.43.x.83, 3
getglobal temp.43.y.84, 4
temp.85 = temp.43.x.83
temp.86 = extern test(temp.85)
getglobal temp.48.x.87, 3
getglobal temp.48.y.88, 4
temp.89 = temp.48.y.88
temp.90 = extern test(temp.89)
return 


----------- eliminate_dead_globals -------------
=======================
fn @toplevel() -> 

---- block 0 ----
temp.51 = int 1
temp.52 = int 2
temp.8.x.53 = temp.51
temp.8.y.54 = temp.52
temp.55 = temp.8.x.53
temp.7.x.56 = temp.55
temp.57 = temp.8.y.54
temp.7.y.58 = temp.57
temp.59 = int 3
temp.60 = int 4
temp.18.x.61 = temp.59
temp.18.y.62 = temp.60
temp.63 = temp.18.x.61
temp.17.x.64 = temp.63
temp.65 = temp.18.y.62
temp.17.y.66 = temp.65
temp.0.origin.x.67 = temp.7.x.56
temp.0.origin.y.68 = temp.7.y.58
temp.0.size.x.69 = temp.17.x.64
temp.0.size.y.70 = temp.17.y.66
temp.71 = temp.0.origin.x.67
setglobal 0, temp.71
temp.72 = temp.0.origin.y.68
setglobal 1, temp.72
temp.73 = temp.0.size.x.69
setglobal 2, temp.73
temp.74 = temp.0.size.y.70
setglobal 3, temp.74
getglobal temp.33.x.75, 0
getglobal temp.33.y.76, 1
temp.77 = temp.33.x.75
temp.78 = extern test(temp.77)
getglobal temp.38.x.79, 0
getglobal temp.38.y.80, 1
temp.81 = temp.38.y.80
temp.82 = extern test(temp.81)
getglobal temp.43.x.83, 2
getglobal temp.43.y.84, 3
temp.85 = temp.43.x.83
temp.86 = extern test(temp.85)
getglobal temp.48.x.87, 2
getglobal temp.48.y.88, 3
temp.89 = temp.48.y.88
temp.90 = extern test(temp.89)
return 


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 0 ----
temp.51 = int 1
temp.52 = int 2
temp.8.x.53 = temp.51
temp.8.y.54 = temp.52
temp.55 = temp.8.x.53
temp.7.x.56 = temp.55
temp.57 = temp.8.y.54
temp.7.y.58 = temp.57
temp.59 = int 3
temp.60 = int 4
temp.18.x.61 = temp.59
temp.18.y.62 = temp.60
temp.63 = temp.18.x.61
temp.17.x.64 = temp.63
temp.65 = temp.18.y.62
temp.17.y.66 = temp.65
temp.0.origin.x.67 = temp.7.x.56
temp.0.origin.y.68 = temp.7.y.58
temp.0.size.x.69 = temp.17.x.64
temp.0.size.y.70 = temp.17.y.66
temp.71 = temp.0.origin.x.67
setglobal 0, temp.71
temp.72 = temp.0.origin.y.68
setglobal 1, temp.72
temp.73 = temp.0.size.x.69
setglobal 2, temp.73
temp.74 = temp.0.size.y.70
setglobal 3, temp.74
getglobal temp.33.x.75, 0
temp.77 = temp.33.x.75
temp.78 = extern test(temp.77)
getglobal temp.38.y.80, 1
temp.81 = temp.38.y.80
temp.82 = extern test(temp.81)
getglobal temp.43.x.83, 2
temp.85 = temp.43.x.83
temp.86 = extern test(temp.85)
getglobal temp.48.y.88, 3
temp.89 = temp.48.y.88
temp.90 = extern test(temp.89)
return
