---
source: compiler/src/compile/ir/optimisations.rs
expression: output
input_file: compiler/src/compile/ir/snapshot_tests/optimisations/integration/comparison_ops.tapir
---
----------- before -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.28, 0
a.29 = temp.28
temp.30 = int 6
b.31 = temp.30
temp.32 = b.31
temp.33 = a.29
temp.34 = temp.32 > temp.33
conditional_jump temp.34 0 1

---- block 0 ----
temp.35 = int 15
temp.36 = black_box(temp.35)
c.37 = temp.36
wait
temp.38 = c.37
storeprop temp.38, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
b.39 = φ(b.31 from 0, b.31 from 1)
a.48 = φ(a.29 from 0, a.29 from 1)
temp.40 = b.39
getprop temp.41, 0
temp.42 = temp.40 < temp.41
conditional_jump temp.42 4 5

---- block 4 ----
temp.43 = int 20
temp.44 = black_box(temp.43)
c.45 = temp.44
wait
temp.46 = c.45
storeprop temp.46, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
a.47 = φ(a.48 from 4, a.48 from 5)
temp.49 = a.47
getprop temp.50, 0
temp.51 = temp.49 != temp.50
conditional_jump temp.51 7 8

---- block 7 ----
temp.52 = int 30
temp.53 = black_box(temp.52)
c.54 = temp.53
wait
temp.55 = c.54
storeprop temp.55, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.6) -> int

---- block 0 ----
temp.56 = x.6
return temp.56


----------- empty_phi -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.28, 0
a.29 = temp.28
temp.30 = int 6
b.31 = temp.30
temp.32 = b.31
temp.33 = a.29
temp.34 = temp.32 > temp.33
conditional_jump temp.34 0 1

---- block 0 ----
temp.35 = int 15
temp.36 = black_box(temp.35)
c.37 = temp.36
wait
temp.38 = c.37
storeprop temp.38, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
temp.40 = b.31
getprop temp.41, 0
temp.42 = temp.40 < temp.41
conditional_jump temp.42 4 5

---- block 4 ----
temp.43 = int 20
temp.44 = black_box(temp.43)
c.45 = temp.44
wait
temp.46 = c.45
storeprop temp.46, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
temp.49 = a.29
getprop temp.50, 0
temp.51 = temp.49 != temp.50
conditional_jump temp.51 7 8

---- block 7 ----
temp.52 = int 30
temp.53 = black_box(temp.52)
c.54 = temp.53
wait
temp.55 = c.54
storeprop temp.55, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.6) -> int

---- block 0 ----
temp.56 = x.6
return temp.56


----------- copy_propagation -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.28, 0
a.29 = temp.28
temp.30 = int 6
b.31 = temp.30
temp.32 = temp.30
temp.33 = temp.28
temp.34 = temp.30 > temp.28
conditional_jump temp.34 0 1

---- block 0 ----
temp.35 = int 15
temp.36 = black_box(temp.35)
c.37 = temp.36
wait
temp.38 = temp.36
storeprop temp.36, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
temp.40 = temp.30
getprop temp.41, 0
temp.42 = temp.30 < temp.41
conditional_jump temp.42 4 5

---- block 4 ----
temp.43 = int 20
temp.44 = black_box(temp.43)
c.45 = temp.44
wait
temp.46 = temp.44
storeprop temp.44, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
temp.49 = temp.28
getprop temp.50, 0
temp.51 = temp.28 != temp.50
conditional_jump temp.51 7 8

---- block 7 ----
temp.52 = int 30
temp.53 = black_box(temp.52)
c.54 = temp.53
wait
temp.55 = temp.53
storeprop temp.53, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.6) -> int

---- block 0 ----
temp.56 = x.6
return x.6


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.28, 0
temp.30 = int 6
temp.34 = temp.30 > temp.28
conditional_jump temp.34 0 1

---- block 0 ----
temp.35 = int 15
temp.36 = black_box(temp.35)
wait
storeprop temp.36, 0
jmp 2

---- block 1 ----
jmp 2

---- block 2 ----
getprop temp.41, 0
temp.42 = temp.30 < temp.41
conditional_jump temp.42 4 5

---- block 4 ----
temp.43 = int 20
temp.44 = black_box(temp.43)
wait
storeprop temp.44, 0
jmp 6

---- block 5 ----
jmp 6

---- block 6 ----
getprop temp.50, 0
temp.51 = temp.28 != temp.50
conditional_jump temp.51 7 8

---- block 7 ----
temp.52 = int 30
temp.53 = black_box(temp.52)
wait
storeprop temp.53, 0
jmp 9

---- block 8 ----
jmp 9

---- block 9 ----
return 

=======================
fn black_box(x.6) -> int

---- block 0 ----
return x.6


----------- empty_block -------------
=======================
fn @toplevel() -> 

---- block 3 ----
getprop temp.28, 0
temp.30 = int 6
temp.34 = temp.30 > temp.28
conditional_jump temp.34 0 2

---- block 0 ----
temp.35 = int 15
temp.36 = black_box(temp.35)
wait
storeprop temp.36, 0
jmp 2

---- block 2 ----
getprop temp.41, 0
temp.42 = temp.30 < temp.41
conditional_jump temp.42 4 6

---- block 4 ----
temp.43 = int 20
temp.44 = black_box(temp.43)
wait
storeprop temp.44, 0
jmp 6

---- block 6 ----
getprop temp.50, 0
temp.51 = temp.28 != temp.50
conditional_jump temp.51 7 9

---- block 7 ----
temp.52 = int 30
temp.53 = black_box(temp.52)
wait
storeprop temp.53, 0
return 

---- block 9 ----
return 

=======================
fn black_box(x.6) -> int

---- block 0 ----
return x.6
