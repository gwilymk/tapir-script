---
source: compiler/src/compile/ir/optimisations.rs
expression: output
input_file: compiler/src/compile/ir/snapshot_tests/optimisations/integration/struct_in_loop.tapir
---
----------- before -------------
=======================
fn @toplevel() -> 

---- block 2 ----
temp.53 = int 0
sum.54 = temp.53
temp.55 = int 1
temp.56 = int 1
temp.5.x.57 = temp.55
temp.5.y.58 = temp.56
temp.59 = temp.5.x.57
p.x.60 = temp.59
temp.61 = temp.5.y.58
p.y.62 = temp.61
temp.63 = int 0
i.64 = temp.63
jmp 0

---- block 0 ----
i.65 = φ(i.64 from 2, i.106 from 5)
sum.69 = φ(sum.54 from 2, sum.86 from 5)
p.x.72 = φ(p.x.60 from 2, p.x.94 from 5)
p.y.75 = φ(p.y.62 from 2, p.y.102 from 5)
temp.66 = i.65
temp.67 = int 5
temp.68 = temp.66 >= temp.67
conditional_jump temp.68 3 4

---- block 3 ----
jmp 1

---- block 4 ----
jmp 5

---- block 1 ----
temp.70 = sum.69
storeprop temp.70, 0
return 

---- block 5 ----
temp.71 = sum.69
temp.73 = p.x.72
temp.23.x.74 = temp.73
temp.76 = p.y.75
temp.23.y.77 = temp.76
temp.78 = temp.23.x.74
temp.79 = temp.71 + temp.78
temp.80 = p.x.72
temp.28.x.81 = temp.80
temp.82 = p.y.75
temp.28.y.83 = temp.82
temp.84 = temp.28.y.83
temp.85 = temp.79 + temp.84
sum.86 = temp.85
temp.87 = p.x.72
temp.36.x.88 = temp.87
temp.89 = p.y.75
temp.36.y.90 = temp.89
temp.91 = temp.36.x.88
temp.92 = int 1
temp.93 = temp.91 + temp.92
p.x.94 = temp.93
temp.95 = p.x.94
temp.44.x.96 = temp.95
temp.97 = p.y.75
temp.44.y.98 = temp.97
temp.99 = temp.44.y.98
temp.100 = int 1
temp.101 = temp.99 + temp.100
p.y.102 = temp.101
temp.103 = i.65
temp.104 = int 1
temp.105 = temp.103 + temp.104
i.106 = temp.105
jmp 0


----------- simplify_blocks -------------
=======================
fn @toplevel() -> 

---- block 2 ----
temp.53 = int 0
sum.54 = temp.53
temp.55 = int 1
temp.56 = int 1
temp.5.x.57 = temp.55
temp.5.y.58 = temp.56
temp.59 = temp.5.x.57
p.x.60 = temp.59
temp.61 = temp.5.y.58
p.y.62 = temp.61
temp.63 = int 0
i.64 = temp.63
jmp 0

---- block 0 ----
i.65 = φ(i.64 from 2, i.106 from 5)
sum.69 = φ(sum.54 from 2, sum.86 from 5)
p.x.72 = φ(p.x.60 from 2, p.x.94 from 5)
p.y.75 = φ(p.y.62 from 2, p.y.102 from 5)
temp.66 = i.65
temp.67 = int 5
temp.68 = temp.66 >= temp.67
conditional_jump temp.68 3 4

---- block 3 ----
temp.70 = sum.69
storeprop temp.70, 0
jmp 1

---- block 4 ----
temp.71 = sum.69
temp.73 = p.x.72
temp.23.x.74 = temp.73
temp.76 = p.y.75
temp.23.y.77 = temp.76
temp.78 = temp.23.x.74
temp.79 = temp.71 + temp.78
temp.80 = p.x.72
temp.28.x.81 = temp.80
temp.82 = p.y.75
temp.28.y.83 = temp.82
temp.84 = temp.28.y.83
temp.85 = temp.79 + temp.84
sum.86 = temp.85
temp.87 = p.x.72
temp.36.x.88 = temp.87
temp.89 = p.y.75
temp.36.y.90 = temp.89
temp.91 = temp.36.x.88
temp.92 = int 1
temp.93 = temp.91 + temp.92
p.x.94 = temp.93
temp.95 = p.x.94
temp.44.x.96 = temp.95
temp.97 = p.y.75
temp.44.y.98 = temp.97
temp.99 = temp.44.y.98
temp.100 = int 1
temp.101 = temp.99 + temp.100
p.y.102 = temp.101
temp.103 = i.65
temp.104 = int 1
temp.105 = temp.103 + temp.104
i.106 = temp.105
jmp 5

---- block 1 ----
return 

---- block 5 ----
jmp 0


----------- copy_propagation -------------
=======================
fn @toplevel() -> 

---- block 2 ----
temp.53 = int 0
sum.54 = temp.53
temp.55 = int 1
temp.56 = int 1
temp.5.x.57 = temp.55
temp.5.y.58 = temp.56
temp.59 = temp.55
p.x.60 = temp.55
temp.61 = temp.56
p.y.62 = temp.56
temp.63 = int 0
i.64 = temp.63
jmp 0

---- block 0 ----
i.65 = φ(temp.63 from 2, i.106 from 5)
sum.69 = φ(temp.53 from 2, sum.86 from 5)
p.x.72 = φ(temp.55 from 2, p.x.94 from 5)
p.y.75 = φ(temp.56 from 2, p.y.102 from 5)
temp.66 = i.65
temp.67 = int 5
temp.68 = i.65 >= temp.67
conditional_jump temp.68 3 4

---- block 3 ----
temp.70 = sum.69
storeprop sum.69, 0
jmp 1

---- block 4 ----
temp.71 = sum.69
temp.73 = p.x.72
temp.23.x.74 = p.x.72
temp.76 = p.y.75
temp.23.y.77 = p.y.75
temp.78 = p.x.72
temp.79 = sum.69 + p.x.72
temp.80 = p.x.72
temp.28.x.81 = p.x.72
temp.82 = p.y.75
temp.28.y.83 = p.y.75
temp.84 = p.y.75
temp.85 = temp.79 + p.y.75
sum.86 = temp.85
temp.87 = p.x.72
temp.36.x.88 = p.x.72
temp.89 = p.y.75
temp.36.y.90 = p.y.75
temp.91 = p.x.72
temp.92 = int 1
temp.93 = p.x.72 + temp.92
p.x.94 = temp.93
temp.95 = temp.93
temp.44.x.96 = temp.93
temp.97 = p.y.75
temp.44.y.98 = p.y.75
temp.99 = p.y.75
temp.100 = int 1
temp.101 = p.y.75 + temp.100
p.y.102 = temp.101
temp.103 = i.65
temp.104 = int 1
temp.105 = i.65 + temp.104
i.106 = temp.105
jmp 5

---- block 1 ----
return 

---- block 5 ----
jmp 0


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 2 ----
temp.53 = int 0
temp.55 = int 1
temp.56 = int 1
temp.63 = int 0
jmp 0

---- block 0 ----
i.65 = φ(temp.63 from 2, i.106 from 5)
sum.69 = φ(temp.53 from 2, sum.86 from 5)
p.x.72 = φ(temp.55 from 2, p.x.94 from 5)
p.y.75 = φ(temp.56 from 2, p.y.102 from 5)
temp.67 = int 5
temp.68 = i.65 >= temp.67
conditional_jump temp.68 3 4

---- block 3 ----
storeprop sum.69, 0
jmp 1

---- block 4 ----
temp.79 = sum.69 + p.x.72
temp.85 = temp.79 + p.y.75
sum.86 = temp.85
temp.92 = int 1
temp.93 = p.x.72 + temp.92
p.x.94 = temp.93
temp.100 = int 1
temp.101 = p.y.75 + temp.100
p.y.102 = temp.101
temp.104 = int 1
temp.105 = i.65 + temp.104
i.106 = temp.105
jmp 5

---- block 1 ----
return 

---- block 5 ----
jmp 0


----------- immediate_arithmetic -------------
=======================
fn @toplevel() -> 

---- block 2 ----
temp.53 = int 0
temp.55 = int 1
temp.56 = int 1
temp.63 = int 0
jmp 0

---- block 0 ----
i.65 = φ(temp.63 from 2, i.106 from 5)
sum.69 = φ(temp.53 from 2, sum.86 from 5)
p.x.72 = φ(temp.55 from 2, p.x.94 from 5)
p.y.75 = φ(temp.56 from 2, p.y.102 from 5)
temp.67 = int 5
temp.68 = i.65 >= temp.67
conditional_jump temp.68 3 4

---- block 3 ----
storeprop sum.69, 0
jmp 1

---- block 4 ----
temp.79 = sum.69 + p.x.72
temp.85 = temp.79 + p.y.75
sum.86 = temp.85
temp.92 = int 1
temp.93 = p.x.72 + imm(1)
p.x.94 = temp.93
temp.100 = int 1
temp.101 = p.y.75 + imm(1)
p.y.102 = temp.101
temp.104 = int 1
temp.105 = i.65 + imm(1)
i.106 = temp.105
jmp 5

---- block 1 ----
return 

---- block 5 ----
jmp 0


----------- duplicate_loads -------------
=======================
fn @toplevel() -> 

---- block 2 ----
temp.53 = int 0
temp.55 = int 1
temp.56 = temp.55
temp.63 = temp.53
jmp 0

---- block 0 ----
i.65 = φ(temp.63 from 2, i.106 from 5)
sum.69 = φ(temp.53 from 2, sum.86 from 5)
p.x.72 = φ(temp.55 from 2, p.x.94 from 5)
p.y.75 = φ(temp.56 from 2, p.y.102 from 5)
temp.67 = int 5
temp.68 = i.65 >= temp.67
conditional_jump temp.68 3 4

---- block 3 ----
storeprop sum.69, 0
jmp 1

---- block 4 ----
temp.79 = sum.69 + p.x.72
temp.85 = temp.79 + p.y.75
sum.86 = temp.85
temp.92 = int 1
temp.93 = p.x.72 + imm(1)
p.x.94 = temp.93
temp.100 = temp.92
temp.101 = p.y.75 + imm(1)
p.y.102 = temp.101
temp.104 = temp.92
temp.105 = i.65 + imm(1)
i.106 = temp.105
jmp 5

---- block 1 ----
return 

---- block 5 ----
jmp 0


----------- empty_block -------------
=======================
fn @toplevel() -> 

---- block 2 ----
temp.53 = int 0
temp.55 = int 1
temp.56 = temp.55
temp.63 = temp.53
jmp 0

---- block 0 ----
i.65 = φ(temp.63 from 2, i.106 from 5, i.106 from 4)
sum.69 = φ(temp.53 from 2, sum.86 from 5, sum.86 from 4)
p.x.72 = φ(temp.55 from 2, p.x.94 from 5, p.x.94 from 4)
p.y.75 = φ(temp.56 from 2, p.y.102 from 5, p.y.102 from 4)
temp.67 = int 5
temp.68 = i.65 >= temp.67
conditional_jump temp.68 3 4

---- block 3 ----
storeprop sum.69, 0
return 

---- block 4 ----
temp.79 = sum.69 + p.x.72
temp.85 = temp.79 + p.y.75
sum.86 = temp.85
temp.92 = int 1
temp.93 = p.x.72 + imm(1)
p.x.94 = temp.93
temp.100 = temp.92
temp.101 = p.y.75 + imm(1)
p.y.102 = temp.101
temp.104 = temp.92
temp.105 = i.65 + imm(1)
i.106 = temp.105
jmp 0


----------- unreferenced_blocks_in_phi -------------
=======================
fn @toplevel() -> 

---- block 2 ----
temp.53 = int 0
temp.55 = int 1
temp.56 = temp.55
temp.63 = temp.53
jmp 0

---- block 0 ----
i.65 = φ(temp.63 from 2, i.106 from 4)
sum.69 = φ(temp.53 from 2, sum.86 from 4)
p.x.72 = φ(temp.55 from 2, p.x.94 from 4)
p.y.75 = φ(temp.56 from 2, p.y.102 from 4)
temp.67 = int 5
temp.68 = i.65 >= temp.67
conditional_jump temp.68 3 4

---- block 3 ----
storeprop sum.69, 0
return 

---- block 4 ----
temp.79 = sum.69 + p.x.72
temp.85 = temp.79 + p.y.75
sum.86 = temp.85
temp.92 = int 1
temp.93 = p.x.72 + imm(1)
p.x.94 = temp.93
temp.100 = temp.92
temp.101 = p.y.75 + imm(1)
p.y.102 = temp.101
temp.104 = temp.92
temp.105 = i.65 + imm(1)
i.106 = temp.105
jmp 0


----------- copy_propagation -------------
=======================
fn @toplevel() -> 

---- block 2 ----
temp.53 = int 0
temp.55 = int 1
temp.56 = temp.55
temp.63 = temp.53
jmp 0

---- block 0 ----
i.65 = φ(temp.53 from 2, i.106 from 4)
sum.69 = φ(temp.53 from 2, sum.86 from 4)
p.x.72 = φ(temp.55 from 2, p.x.94 from 4)
p.y.75 = φ(temp.55 from 2, p.y.102 from 4)
temp.67 = int 5
temp.68 = i.65 >= temp.67
conditional_jump temp.68 3 4

---- block 3 ----
storeprop sum.69, 0
return 

---- block 4 ----
temp.79 = sum.69 + p.x.72
temp.85 = temp.79 + p.y.75
sum.86 = temp.85
temp.92 = int 1
temp.93 = p.x.72 + imm(1)
p.x.94 = temp.93
temp.100 = temp.92
temp.101 = p.y.75 + imm(1)
p.y.102 = temp.101
temp.104 = temp.92
temp.105 = i.65 + imm(1)
i.106 = temp.105
jmp 0


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 2 ----
temp.53 = int 0
temp.55 = int 1
jmp 0

---- block 0 ----
i.65 = φ(temp.53 from 2, i.106 from 4)
sum.69 = φ(temp.53 from 2, sum.86 from 4)
p.x.72 = φ(temp.55 from 2, p.x.94 from 4)
p.y.75 = φ(temp.55 from 2, p.y.102 from 4)
temp.67 = int 5
temp.68 = i.65 >= temp.67
conditional_jump temp.68 3 4

---- block 3 ----
storeprop sum.69, 0
return 

---- block 4 ----
temp.79 = sum.69 + p.x.72
temp.85 = temp.79 + p.y.75
sum.86 = temp.85
temp.92 = int 1
temp.93 = p.x.72 + imm(1)
p.x.94 = temp.93
temp.101 = p.y.75 + imm(1)
p.y.102 = temp.101
temp.105 = i.65 + imm(1)
i.106 = temp.105
jmp 0


----------- dead_store_elimination -------------
=======================
fn @toplevel() -> 

---- block 2 ----
temp.53 = int 0
temp.55 = int 1
jmp 0

---- block 0 ----
i.65 = φ(temp.53 from 2, i.106 from 4)
sum.69 = φ(temp.53 from 2, sum.86 from 4)
p.x.72 = φ(temp.55 from 2, p.x.94 from 4)
p.y.75 = φ(temp.55 from 2, p.y.102 from 4)
temp.67 = int 5
temp.68 = i.65 >= temp.67
conditional_jump temp.68 3 4

---- block 3 ----
storeprop sum.69, 0
return 

---- block 4 ----
temp.79 = sum.69 + p.x.72
temp.85 = temp.79 + p.y.75
sum.86 = temp.85
temp.93 = p.x.72 + imm(1)
p.x.94 = temp.93
temp.101 = p.y.75 + imm(1)
p.y.102 = temp.101
temp.105 = i.65 + imm(1)
i.106 = temp.105
jmp 0
