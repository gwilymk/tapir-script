# Tests for negative number handling
extern fn assert(value: bool);

# Negative int literals via subtraction
var neg5 = 0 - 5;
var neg100 = 0 - 100;
var neg1 = 0 - 1;

assert(neg5 == 0 - 5);
assert(neg100 == 0 - 100);
assert(neg1 == 0 - 1);

# Negative fix literals
var neg_fix = 0.0 - 3.5;
assert(neg_fix == 0.0 - 3.5);

# Operations with negatives
assert(neg5 + 10 == 5);
assert(neg5 - 5 == 0 - 10);
assert(neg5 * 2 == 0 - 10);
assert(neg5 * (0 - 2) == 10);

# Comparison with negatives
assert(neg5 < 0);
assert(neg5 < 5);
assert(neg5 > 0 - 10);
assert(neg5 <= 0 - 5);
assert(neg5 >= 0 - 5);
assert(neg5 != 5);

# Negative in expressions
var result = 10 + (0 - 3);
assert(result == 7);

var product = (0 - 4) * (0 - 5);
assert(product == 20);

# Negative fix operations
var nf1 = 0.0 - 2.5;
var nf2 = 0.0 - 1.5;
assert(nf1 + nf2 == 0.0 - 4.0);
assert(nf1 - nf2 == 0.0 - 1.0);
assert(nf1 * nf2 == 3.75);

# Absolute value of negatives
assert((0 - 5).abs() == 5);
assert((0.0 - 3.5).abs() == 3.5);

# Min/max with negatives
assert((0 - 5).min(0 - 3) == 0 - 5);
assert((0 - 5).max(0 - 3) == 0 - 3);
assert((0 - 5).min(5) == 0 - 5);
assert((0 - 5).max(5) == 5);

# Negative vector components
var nv = int2(0 - 3, 0 - 4);
assert(nv.x == 0 - 3);
assert(nv.y == 0 - 4);
assert(nv.abs().x == 3);
assert(nv.abs().y == 4);

# Floor/ceil with negative fix
var nfix = 0.0 - 2.5;
assert(nfix.floor() == 0 - 3);  # Floor toward -infinity
assert(nfix.ceil() == 0 - 2);   # Ceil toward +infinity
assert(nfix.round() == 0 - 2);  # Round to nearest (banker's rounding or standard?)

# Subtraction that results in negative
var a = 5;
var b = 10;
var diff = a - b;
assert(diff == 0 - 5);

# Chain of negatives
var chain = 0 - (0 - 5);
assert(chain == 5);

# Large negative
var large_neg = 0 - 1000000;
assert(large_neg + 1000000 == 0);
assert(large_neg * (0 - 1) == 1000000);
