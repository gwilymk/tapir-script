# Tests with many variables to stress register allocation
extern fn assert(value: bool);

# Create many int variables
var i1 = 1;
var i2 = 2;
var i3 = 3;
var i4 = 4;
var i5 = 5;
var i6 = 6;
var i7 = 7;
var i8 = 8;
var i9 = 9;
var i10 = 10;

# Use them all
assert(i1 + i2 == 3);
assert(i3 + i4 == 7);
assert(i5 + i6 == 11);
assert(i7 + i8 == 15);
assert(i9 + i10 == 19);
assert(i1 + i10 == 11);

# Create many fix variables
var f1 = 1.0;
var f2 = 2.0;
var f3 = 3.0;
var f4 = 4.0;
var f5 = 5.0;
var f6 = 6.0;
var f7 = 7.0;
var f8 = 8.0;
var f9 = 9.0;
var f10 = 10.0;

# Use them all
assert(f1 + f2 == 3.0);
assert(f3 + f4 == 7.0);
assert(f5 + f6 == 11.0);
assert(f7 + f8 == 15.0);
assert(f9 + f10 == 19.0);
assert(f1 + f10 == 11.0);

# Create many fix2 variables
var v1 = fix2(1.0, 2.0);
var v2 = fix2(3.0, 4.0);
var v3 = fix2(5.0, 6.0);
var v4 = fix2(7.0, 8.0);
var v5 = fix2(9.0, 10.0);

# Use them all
assert(v1.x + v5.x == 10.0);
assert(v2.y + v4.y == 12.0);
assert((v1 + v2).x == 4.0);
assert((v3 + v4).y == 14.0);
assert(v1.dot(v2) == 11.0);
assert(v3.dot(v4) == 83.0);

# Mix int and fix variables
assert(i1 == 1);
assert(f1 == 1.0);
assert(i2 == 2);
assert(f2 == 2.0);

# More complex expressions with many live variables
var sum_int = i1 + i2 + i3 + i4 + i5;
var sum_fix = f1 + f2 + f3 + f4 + f5;
assert(sum_int == 15);
assert(sum_fix == 15.0);

# Verify no cross-contamination between int and fix
var computed_int = (i1 + i2) * i3;
var computed_fix = (f1 + f2) * f3;
assert(computed_int == 9);
assert(computed_fix == 9.0);
